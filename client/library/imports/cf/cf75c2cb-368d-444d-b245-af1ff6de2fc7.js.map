{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var manager = require('manager');\nconst KQGlobalEvent = require('KQGlobalEvent');\nconst KQNativeInvoke = require('KQNativeInvoke');\n\nlet SocketConstant = {\n  MaxReconnectCheckInterval: 5, // 重连检测时间片\n};\n\n/**\n * 这是对 WebSocket 的一个封装\n * \n * 里面包含自动重连的功能\n */\nlet Socket = cc.Class({\n  extends: cc.Component,\n\n  properties: {\n    _lastReceiveMsgTime: 0, // 最后一次收到消息时间(毫秒)\n    _timeout: 8, // 超时时长 （秒）\n  },\n\n  statics: {\n    instance: null,\n    // url:\"ws://182.18.26.13:5041\",\n    url:\"ws://123.56.20.164:5041\",\n    // url:\"ws://192.168.0.108:5041\",\n    //url:\"ws://183.3.205.149:5002\",\n  },\n\n  // use this for initialization\n  onLoad: function () {\n    Socket.instance = this;\n\n    this.name = \"socket\";\n\n    cc.game.addPersistRootNode(this.node);\n    if (cc.game.isPersistRootNode(this.node)) {\n      cc.log('添加全局节点 Socket 成功');\n    }\n\n    this._registerAppActiveChange();\n\n    this.isCreating = false;\n    this.createIndex = 0;\n    this.createSocket();\n\n    this.schedule(function () {\n      this.checkConnection();\n    }, 5);\n\n    this.recvTime = Date.now(); //接收到最新一条服务器的信息的时间\n    //cc.log(manager.version);\n\n    this._checkSocket();\n  },\n\n  checkConnection: function () {\n    //客户端定时给服务端发送点数据，防止连接由于长时间没有通讯而被某些节点的防火墙关闭导致连接断开的情况。\n    this.sendMessage('checkAction', '');\n  },\n\n  createSocket: function () {\n    var self = this;\n    this.createIndex++; //创建次数加1\n    if (this.createIndex > 5) {\n      this.networkError();\n      KQNativeInvoke.forceExitApp();\n      return;\n    }\n    this.isCreating = true;\n\n    KQGlobalEvent.emit(Socket.Event.SocketConnecting);\n    this.ws = new WebSocket(Socket.url);\n    if (this.ws === null) {\n      this.networkError();\n      KQGlobalEvent.emit(Socket.Event.SocketConnectError, {'data': 'Socket 创建失败'});\n      KQNativeInvoke.forceExitApp();\n      return;\n    }\n    this.socketError = false;\n\n    // socket 连接成功\n    this.ws.onopen = function (event) {\n      //cc.log(\"WebSocket 连接成功：\", event);\n      \n      self._lastReceiveMsgTime = cc.sys.now();\n      KQGlobalEvent.emit(Socket.Event.SocketConnectSuccessed, event);\n\n      self.isCreating = false;\n      self.socketError = false;\n      self.createIndex = 0;\n      self.connectionSuccess();\n      self.sendReconnectInfo();\n    };\n\n    // socket 接收到消息\n    this.ws.onmessage = function (event) {\n      self._lastReceiveMsgTime = cc.sys.now();\n      KQGlobalEvent.emit(Socket.Event.SocketReceiveMessage, event.data);\n\n      self.isCreating = false;\n      self.socketError = false;\n      self.receviceMessage(event.data);\n      self._dispatchResponse(event.data);\n      self.recvTime = Date.now(); //接收最新一条信息的时间\n\n      /**/\n    };\n\n    /**\n     * socket 发生错误\n     * \n     * socket 本身有 `onerror` 回调，但事实证明，其不靠谱，\n     * 有很大的机率有误报的行为，常常在没有错误时，会给错误回调。\n     * 且不能定制超时时长\n     * \n     * @param {String} message \n     */\n    this.ws._kq_onerror = function (message) {\n      cc.error(`WebSocket 连接错误：${message}`);\n\n      KQGlobalEvent.emit(Socket.Event.SocketConnectError, {data: message});\n      self.ws.close();\n      if (!self.ws) {\n        return;\n      }\n\n      // 虽然调用了 websocket 的 close 方法，但是\n      // 它并会立即调用 onclose 回调，而是在未来的某\n      // 一时间再回调 onclose；但这里明显可以直接回调了。\n      let ws = self.ws;\n\n      self.ws.onclose();\n      ws.onclose = function(){};\n    };\n\n    // socke 已关闭\n    this.ws.onclose = function (event) {\n      //cc.log('WebSocket 已关闭 close time=' + Date.now() + \" event: \" + event);\n\n\n      self.isCreating = false;\n      self.socketError = true;\n      self.ws = null;\n      self.connectionDisconnect();\n      KQGlobalEvent.emit(Socket.Event.SocketDisconnect, event);\n      //cc.log('socket close'+JSON.stringify(event));\n    };\n  },\n\n  reconnect: function () {\n    var self = this;\n    this.scheduleOnce(function () {\n      if (!self.isCreating && self.socketError) {\n        self.createSocket();\n      }\n    }, 2);\n  },\n\n  sendReconnectInfo: function () {\n    var self = this;\n    this.scheduleOnce(function () {\n      if (this.userInfo != null) {\n        var userId = self.userInfo.user_id || self.userInfo.id;\n        self.sendMessage('reconnect', {\n          'userId': userId\n        });\n      }\n    }, 1);\n  },\n\n  receviceMessage: function (response) {\n\n  },\n\n  connectionDisconnect: function () {\n\n  },\n\n  connectionSuccess: function () {\n\n  },\n\n  networkError: function () {\n\n  },\n\n  checkNetworkStart: function () {\n\n  },\n\n  checkNetworkEnd: function () {\n\n  },\n\n  _dispatchResponse: function (responseString) {\n    //cc.log(\"WebSocket 接收到服务器消息：\", responseString);\n    let response = JSON.parse(responseString);\n    let action = response[\"action\"];\n    if (action) {\n      KQGlobalEvent.emit(action, response);\n    }\n  },\n\n  // MARK: 前后台操作\n  _registerAppActiveChange: function () {\n    //cc.log(\"WebSocket 注册应用进入前、后台事件\");\n    cc.game.on(cc.game.EVENT_HIDE, this._appEnterBackground, this);\n    cc.game.on(cc.game.EVENT_SHOW, this._appBecomActive, this);\n  },\n\n  /**\n   * 进入后台\n   */\n  _appEnterBackground: function () {\n    let now = cc.sys.now();\n    if (now - this._lastAppEnterBackgroundTime < 100) {\n      return;\n    }\n    this._lastAppEnterBackgroundTime = now;\n    \n    //cc.log(\"WebSocket 检测到应用进入后台：\", new Date());\n    let id = this.userInfo ? this.userInfo.id : undefined;\n    Socket.sendAppPause(id);\n    this._cancelCheckSocket();\n  },\n\n  /**\n   * 进入前台 \n   */\n  _appBecomActive: function () {\n    let now = cc.sys.now();\n    if (now - this._lastAppBecomActiveTime < 100) {\n      return;\n    }\n    this._lastAppBecomActiveTime = now;\n\n    //cc.log(\"WebSocket 检测到应用进入前台：\", new Date());\n    let id = this.userInfo ? this.userInfo.id : undefined;\n    Socket.sendAppActive(id);\n    this._checkSocket();\n\n    this.scheduleOnce(function() {\n      this._checkSocketExecute();\n    }.bind(this), 1.5);\n  },\n\n  //进入后台操作\n  enterbackgroudAction: function () {\n    this._appEnterBackground();\n  },\n\n  //进入前台操作\n  resumeAction: function () {\n    //检查网络\n    this._checkNetwork();\n    this._appBecomActive();\n  },\n\n  sendMessage: function (action, data) {\n    data = this._strongVerifyData(data);\n\n    if (this.socketError) {\n      cc.error(\"socket 连接错误：\" + this.socketError);\n      this.reconnect();\n      return;\n    }\n    //cc.log('WebSocket 发送消息：' + action, data);\n    if (cc.sys.isObjectValid(this.ws)) {\n      if (this.ws.readyState === WebSocket.OPEN) {\n        this.ws.send(this._convertParameterToString(action, data));\n      }\n    } else {\n      this.connectionDisconnect();\n    }\n  },\n\n  _strongVerifyData: function(data = {}) {\n    if ((typeof data) == 'string') {\n      data = {\"string\": data};\n    }\n\n    if (data == null) {\n      data = {};\n    }\n\n    if (!data[\"userId\"]) {\n      if (this.userInfo && (typeof this.userInfo) == 'object' && this.userInfo.id) {\n        data[\"userId\"] = this.userInfo.id;\n      }\n\n    }\n    return data;\n  },\n\n  _convertParameterToString: function (action, data = {}) {\n    var obj = {};\n    obj.action = action;\n    obj.data = data;\n    \n    return JSON.stringify(obj);\n  },\n\n  // 检查网络\n  _checkNetwork: function () {\n    if (this.checkNetworkNow) {\n      this.checkNetworkNow();\n    }\n\n    this.shouldCheck = true;\n    if (!this.socketError) {\n      this.recvTime = 0;\n      this.sendMessage('checkAction', '');\n      this.scheduleOnce(function () {\n        this.checkNetworkEnd();\n        this.shouldCheck = false;\n        if (this.recvTime === 0) {\n          this.connectionDisconnect();\n        }\n      }, 2.5);\n    } else {\n      this.connectionDisconnect();\n    }\n  },\n\n  // MARK: socket 掉线尽早确认\n  _checkSocket: function () {\n    this.schedule(this._checkSocketExecute, SocketConstant.MaxReconnectCheckInterval, cc.macro.REPEAT_FOREVER);\n  },\n\n  _cancelCheckSocket: function () {\n    this.unschedule(this._checkSocketExecute);\n  },\n\n  _checkSocketExecute: function () {\n    if (this._isSocketTimeout() && this.ws) {\n      this.ws._kq_onerror('连接超时');\n      return;\n    }\n  },\n\n  // socket 是否已超时\n  _isSocketTimeout: function () {\n    return this._lastReceiveMessageInterval() >= this._timeout;\n  },\n\n  // 上一次收到消息到现在的时间间隔\n  _lastReceiveMessageInterval: function () {\n    let now = cc.sys.now();\n    let interval = (now - this._lastReceiveMsgTime) / 1000;\n    //cc.log(`WebSocket 现在距上一条收到消息的时间间隔是：${interval} 秒`);\n    return interval;\n  },\n\n});\n\n// MARK: Socket 事件定义\nSocket.Event = {\n  SocketConnecting: \"SocketConnecting\",             // Socket 正在连接\n  SocketConnectSuccessed: \"SocketConnectSuccessed\", // 连接成功\n  SocketDisconnect: \"SocketDisconnect\",         // Socket 断开连接\n  SocketConnectError: \"SocketConnectError\",     // Socket 连接错误\n  SocketReceiveMessage: \"SocketReceiveMessage\", // Socket 接收到消息\n\n  LoginJoin:\"loginJoin\",                // 客户端发送 从登陆界面获取房间号进入游戏\n  RecordId:\"recordId\",                  // 客户端发送  \n  OnceAgain:\"onceAgain\",                  // 客户端发送  \n  BeiLv: \"beiLv\",                       // 客户端发送  \n  InviteCode: \"inviteCode\",             // 客户端发送   邀请码\n  JoinDesk: \"joinDesk\",                 // 客户端发送\n  CreateDesk: \"createDesk\",             // 客户端发送\n  LeaveDesk: \"leaveDesk\",               // 离开桌子\n  DissolveDesk: \"dissolveDesk\",         // 解散桌子\n  AnswerDissolve: \"answerDissolve\",     // 回答请求退出命令\n  GetDeskInfo: \"getDeskInfo\",           // 客户端发送\n  SendImage: \"sendImage\",               // 客户端发送\n  SendText: \"sendText\",                 // 客户端发送\n  SendEmoji: \"sendEmoji\",               // 客户端发送\n  ChangeInfo:\"changeInfo\",              // 客户端发送\n  SendAudioMessage: \"sendAudioMessage\", // 客户端发送  发送语音消息\n  GetRecord: \"getRecord\",               // 获取战绩信息\n  GetItemRecord: \"getItemRecord\",       // 获取战绩信息\n  PlayCard: \"playCard\",                 // 客户端发送，用户打出牌\n  TimeoutDissolve: \"timeoutDissolve\",   // 请求退出超时时，需要发出的消息\n  Feedback: \"feedback\",         // 客户端发送  反馈信息\n  SharePng: \"sharePng\",         // 客户端发送  分享领取砖石\n  EnterRandom: \"interRandom\",   // 客户端发送  进入随机场\n  CancelRandom: \"cancelRandom\", // 客户端发送  取消进入随机场\n  ForceExitRandom: \"dissolve\",  // 客户端发送 强制退出随机场\n  Ready: \"ready\",               // 客户端发送 准备\n  StartGame: \"startGame\", // 客户端发送 开始游戏\n  GetHallInfo: \"getHallInfo\",   // 客户端发送 获取大厅信息\n  GetUserInfo: \"getUserInfo\",   // 客户端发送 获取用户信息\n  CheckAction: \"checkAction\",   // 客户端发送，用来检测与服务器的连通性\n  Pause: \"pause\",               // 客户端进入后台时要发送的消息\n  Active: \"active\",             // 客户端回到前台时要发送的消息\n  Qingli: \"qingli\",             // 客户端回到前台时要发送的消息\n\n  ReceiveRequestDissolve: \"requestDissolve\", // 请求解散桌子 服务器发送\n  ReceiveRequestDissolveResult: \"requestDissolveResult\", // 请求解散桌子结果\n  ReceiveChatText: \"sendText\",    // 服务器发送\n  ReceiveChatEmoji: \"sendEmoji\",  // 服务器发送\n  ReceiveDeskInfo: \"deskInfo\",    // 服务器发送\n  ReceiveGameOver: \"gameOver\",    // 服务器发送\n  ReceiveFaPai: \"fapai\",          // 服务器发送\n  ReceiveSharePng: \"sharePngs\",   // 服务器发送\n  ReceiveOnlineStatus: \"sendOnlineStatus\",  // 服务器发送\n  ReceiveOnChangeInfo: \"changeInfo\",        // 服务器发送\n  ReceiveAudioMessage: \"sendAudioMessage\",  // 服务器发送，接收到用户发送了语音消息\n  ReceivePlayCard: \"playCard\",              // 服务器发送，有用户已经准备好牌\n  ReceiveCreateDesk: \"createDesk\",          // 服务器发送，创建房间的回调\n  ReceiveReady: \"ready\",                    // 服务器发送，有用户点击了准备\n  ReceiveHallInfo: \"getHallInfo\",           // 服务器发送\n  ReceiveGetUserInfo: \"getUserInfo\",        // 服务器发送 获取用户信息\n  ReceiveCheckAction: \"checkAction\",        // 服务器发送  用来确认 Socket 还在连着\n  ReceiveForceExit: \"forceExit\",            // 服务器发送  用来使客户端强退\n  ReceiveDissolveDesk: \"dissolveDesk\",      // 服务器发送   当房主退出时，解散桌子\n  ReceiveInterRandom: \"interRandom\",        // 服务器发送   进入随机场的反馈\n  ReceivePause: \"pause\",                    // 服务器发送   当有用户设备进入后台时，会收到这条消息\n  ReceiveInviteCode: 'inviteCode',          // 服务器发送，收到邀请码的消息\n  ReceiveLeaveDesk: 'leaveDesk',            // 服务器发送，收到需要离开桌子的消息\n  ReceiveSelectBeiLv: 'selectBeiLv',        // 服务器发送，收到选择倍率的消息\n  ReceiveBeiLv:'beiLv',                     // 服务器发送，收到倍率的消息\n  ReceiveQingLi:'qingli',                   // 服务器发送，收到请离\n  ReceiveRecordId:'recordId',               // 服务器发送，收到战绩信息\n  ReceiveLoginJoin:'loginJoin',             // 服务器发送，收到从页面进入房间信息\n  ReceiveOnceAgain:'onceAgain',             // 服务器发送，收到再来一局信息\n  ReceiveNoUionid:'noUionid',             // 服务器发送，收到没有unionID信号\n};\n\n\n// MARK: Socket 提供的可发给服务器消息的方法\n\nSocket.sendCheckAction = function() {\n  this.instance.sendMessage(this.Event.CheckAction, null);\n};\n/**/\nSocket.sendDidReceiveGameOverAction = function (userId) {\n  const param = userId ? {\"userId\": userId} : null;\n  this.instance.sendMessage(Socket.Event.DidReceiveGameOverAction, param);\n};\n/**/\n\n\n/**\n * 当 APP 进入后台时要发送的消息\n */\nSocket.sendAppPause = function(userId) {\n  let param = userId ? {\"userId\": userId} : null;\n  this.instance.sendMessage(this.Event.Pause, param);\n};\n\n/**\n * 当 APP 进入前台时发送的消息\n */\nSocket.sendAppActive = function(userId) {\n  let param = userId ? {\"userId\": userId} : null;\n  this.instance.sendMessage(this.Event.Active, param);\n};\n\n// 开房\nSocket.sendCreateDesk = function (createDescInfo, userId) {\n  cc.assert(createDescInfo);\n  cc.assert(userId);\n\n  createDescInfo[\"userId\"] = userId;\n  this.instance.sendMessage(this.Event.CreateDesk, createDescInfo);\n};\n\nSocket.sendQingli = function(leaveId,userId){\n let param = {\n    \"leaveId\": leaveId,\n    \"userId\": userId,\n  };\n  this.instance.sendMessage(this.Event.Qingli, param);\n};\n// 从登陆页面加入房间\nSocket.sendLoginJoin = function (roomId, userId) {\n  let param = {\n    \"roomId\": roomId,\n    \"userId\": userId,\n  };\n  this.instance.sendMessage(this.Event.LoginJoin, param);\n};\n// 再来一局\nSocket.sendOnceAgain = function (again,userId) {\n  let param = {\n    \"userId\": userId,\n    \"again\":again,\n  };\n  this.instance.sendMessage(this.Event.OnceAgain, param);\n};\n// 加入房间\nSocket.sendJoinDesk = function (roomId, userId) {\n  cc.assert(roomId);\n  cc.assert(userId);\n\n  let param = {\n    \"roomId\": roomId,\n    \"userId\": userId,\n  };\n  this.instance.sendMessage(this.Event.JoinDesk, param);\n};\n// 向服务端发送我选择的倍率\nSocket.sendBeiLv = function(beilv,userId){\n  let param = {\n    \"beilv\": beilv,\n    \"userId\": userId,\n  };\n  this.instance.sendMessage(this.Event.BeiLv, param);\n};\n// 发送邀请码\nSocket.sendInviteCode = function(inviteCode,userId){\n  let param = {\n    \"inviteCode\": inviteCode,\n    \"userId\": userId,\n  };\n  this.instance.sendMessage(this.Event.InviteCode, param);\n};\n\n// 获取房间信息\nSocket.sendGetDesckInfo = function (userId) {\n  cc.assert(userId);\n  let param = {\n    \"userId\": userId,\n  };\n\n  this.instance.sendMessage(this.Event.GetDeskInfo, param);\n};\n\nSocket.sendText = function (userId, text) {\n  //cc.assert(userId);\n  //cc.assert(text);\n  let param = {\n    \"msg\": text,\n    \"userId\": userId,\n  };\n  this.instance.sendMessage(this.Event.SendText, param);\n};\nSocket.sendEmoji = function(userId,emoji){\n  let param = {\n    \"emoji\": emoji,\n    \"userId\": userId,\n  };\n  this.instance.sendMessage(this.Event.SendEmoji, param);\n};\nSocket.sendChangeInfo = function(userId,Info){\n  let param = {\n    \"changeInfo\": Info,\n    \"userId\": userId,\n  };\n  this.instance.sendMessage(this.Event.ChangeInfo, param);\n};\nSocket.sendAudioMessage = function (userId, url = \"\") {\n  cc.assert(userId);\n  cc.assert(url.length > 0);\n\n  if (url.length == 0) {\n    return;\n  }\n\n  let param = {\n    \"url\": url,\n    \"userId\": userId,\n  };\n  this.instance.sendMessage(this.Event.SendAudioMessage, param);\n};\n\nSocket.sendImage = function (userId, image) {\n  cc.assert(userId);\n  cc.assert(image);\n  let param = {\n    \"msg\": image,\n    \"userId\": userId,\n  };\n  this.instance.sendMessage(this.Event.SendImage, param);\n};\n\nSocket.sendGetRecrod = function (userId) {\n  cc.assert(userId);\n  let param = {\n    \"userId\": userId,\n  };\n  this.instance.sendMessage(this.Event.GetRecord, param);\n};\n\nSocket.sendGetRecrodFromId = function(recordId){\n  let param = {\n    \"recordId\":recordId,\n  };\n  this.instance.sendMessage(this.Event.RecordId,param);\n};\n\nSocket.sendDissolveDesk = function (userId) {\n  cc.assert(userId);\n  let param = {\n    \"userId\": userId,\n  };\n  this.instance.sendMessage(this.Event.DissolveDesk, param);\n};\n\nSocket.sendGetItemRecord = function (userId, parentId) {\n  cc.assert(userId);\n  cc.assert(parentId);\n  let param = {\n    \"userId\": userId,\n    \"parentId\": parentId,\n  };\n\n  this.instance.sendMessage(this.Event.GetItemRecord, param);\n};\n\nSocket.sendLeaveDesk = function (userId) {\n    cc.assert(userId);\n    let param = {\n      \"userId\": userId,\n    };\n\n    this.instance.sendMessage(this.Event.LeaveDesk, param);\n},\n\n/**\n * 回答退房请求\n * \n * @param  {Number} userId 当前用户 id\n * @param  {NUmber} answer=1 回答。1 表示同意； 0 表示拒绝； -1 表示未选择\n */\nSocket.sendAnswerDissolve = function (userId, answer = 0) {\n  cc.assert(userId);\n  let param = {\n    \"userId\": userId,\n    \"answer\": answer\n  };\n\n  this.instance.sendMessage(this.Event.AnswerDissolve, param);\n},\n\n  Socket.sendForceExitRoom = function (userId) {\n    cc.assert(userId);\n    let param = {\n      \"userId\": userId,\n    };\n\n    this.instance.sendMessage(this.Event.DissolveDesk, param);\n  },\n\n  // 十三张中\n  // cardInfo 类似于：\n  // [{\n  //         'cards':[{'suit':suit,'number':number},{}],//特殊牌不用传\n  //         'type':0,\n  //         'value':4,\n  //         'isContainExtra':true,// 特殊牌是否包含特殊牌\n  //     },\n  //     {\n  //         'cards':[{'suit':suit,'number':number},{}],\n  //         'type':0,\n  //         'value':4\n  //     }]\nSocket.sendPlayCard = function (userId, cardInfo) {\n    cc.assert(userId);\n    let param = {\n      \"userId\": userId,\n      \"card\": cardInfo\n    };\n\n    this.instance.sendMessage(this.Event.PlayCard, param);\n};\n\nSocket.sendTimeoutDissolve = function (userId) {\n  cc.assert(userId);\n  let param = {\n    \"userId\": userId,\n  };\n\n  this.instance.sendMessage(this.Event.TimeoutDissolve, param);\n};\n\nSocket.sendFeedback = function (userId, text) {\n  cc.assert(userId);\n  cc.assert(text);\n  let param = {\n    \"userId\": userId,\n    \"text\": text\n  };\n\n  this.instance.sendMessage(this.Event.Feedback, param);\n}\n\nSocket.sendSharePng = function (userId) {\n  cc.assert(userId);\n  let param = {\n    \"userId\": userId,\n  };\n  this.instance.sendMessage(this.Event.SharePng, param);\n};\n// 开始匹配随机场\nSocket.sendEnterRandom = function (userId) {\n  cc.assert(userId);\n  let param = {\n    \"userId\": userId,\n  };\n\n  this.instance.sendMessage(this.Event.EnterRandom, param);\n};\n\n// 取消匹配随机场\nSocket.sendCancelRandom = function (userId) {\n  cc.assert(userId);\n  let param = {\n    \"userId\": userId,\n  };\n\n  this.instance.sendMessage(this.Event.CancelRandom, param);\n};\n\n// 准备\nSocket.sendReady = function (userId) {\n    cc.assert(userId);\n    let param = {\n      \"userId\": userId,\n    };\n\n    this.instance.sendMessage(this.Event.Ready, param);\n  },\n    Socket.sendStartGame = function (userId) {\n      cc.assert(userId);\n      let param = {\n        \"userId\": userId,\n      };\n      cc.log(this.Event.StartGame)\n      cc.log()\n      this.instance.sendMessage(this.Event.StartGame, param);\n    },\n\n// 获取大厅信息\nSocket.sendGetHallInfo = function (userId) {\n    let param = {\n      \"userId\": userId,\n    };\n\n    this.instance.sendMessage(this.Event.GetHallInfo, param);\n},\n\n// 获取用户信息\nSocket.sendGetUserInfo = function (userId, openId) {\n    let param = {\n      \"userId\": userId,\n      \"openId\": openId,\n    };\n\n    this.instance.sendMessage(this.Event.GetUserInfo, param);\n},\n\nmodule.exports = Socket;"
  ]
}